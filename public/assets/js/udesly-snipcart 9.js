!function(){"use strict";var e=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e};function t(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(a,n)}var r=function(e){return function(){var r=this,a=arguments;return new Promise((function(n,o){var i=e.apply(r,a);function c(e){t(i,n,o,c,s,"next",e)}function s(e){t(i,n,o,c,s,"throw",e)}c(void 0)}))}};function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;return t.querySelectorAll('[data-node-type="'.concat(e,'"]'))}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;return t.querySelector('[data-node-type="'.concat(e,'"]'))}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var o,i,c=(function(e,t){!function(e){function t(e){var r,a,n=new Error(e);return r=n,a=t.prototype,Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a,n}function r(e,r,a){var n=r.slice(0,a).split(/\n/),o=n.length,i=n[o-1].length+1;throw t(e+=" at line "+o+" col "+i+":\n\n  "+r.split(/\n/)[o-1]+"\n  "+Array(i).join(" ")+"^")}t.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});var a=new Function("return this")().Promise;function n(e,t){for(var r in t)a=t,n=r,Object.prototype.hasOwnProperty.call(a,n)&&(e[r]=t[r]);var a,n;return e}function o(e,t,r,a){var n,o;return Array.isArray(t.autoTrim)?(n=t.autoTrim[1],o=t.autoTrim[0]):n=o=t.autoTrim,(r||!1===r)&&(n=r),(a||!1===a)&&(o=a),o||n?"slurp"===n&&"slurp"===o?e.trim():("_"===n||"slurp"===n?e=function(e){return String.prototype.trimLeft?e.trimLeft():e.replace(/^\s+/,"")}(e):"-"!==n&&"nl"!==n||(e=e.replace(/^(?:\r\n|\n|\r)/,"")),"_"===o||"slurp"===o?e=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/\s+$/,"")}(e):"-"!==o&&"nl"!==o||(e=e.replace(/(?:\r\n|\n|\r)$/,"")),e):e}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function c(e){return i[e]}var s=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,l=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,p=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function d(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function u(e,t){var a=[],n=!1,i=0,c=t.parse;if(t.plugins)for(var u=0;u<t.plugins.length;u++)(k=t.plugins[u]).processTemplate&&(e=k.processTemplate(e,t));function m(e,r){e&&(e=o(e,t,n,r))&&(e=e.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),a.push(e))}t.rmWhitespace&&(e=e.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),s.lastIndex=0,l.lastIndex=0,p.lastIndex=0;for(var h,f=[c.exec,c.interpolate,c.raw].reduce((function(e,t){return e&&t?e+"|"+d(t):t?d(t):e}),""),y=new RegExp("([^]*?)"+d(t.tags[0])+"(-|_)?\\s*("+f+")?\\s*","g"),v=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+d(t.tags[1])+")","g");h=y.exec(e);){i=h[0].length+h.index;var g=h[1],w=h[2],b=h[3]||"";m(g,w),v.lastIndex=i;for(var E=void 0,S=!1;E=v.exec(e);){if(E[1]){var C=e.slice(i,E.index);y.lastIndex=i=v.lastIndex,n=E[2],S={t:b===c.exec?"e":b===c.raw?"r":b===c.interpolate?"i":"",val:C};break}var x=E[0];if("/*"===x){var A=e.indexOf("*/",v.lastIndex);-1===A&&r("unclosed comment",e,E.index),v.lastIndex=A}else"'"===x?(l.lastIndex=E.index,l.exec(e)?v.lastIndex=l.lastIndex:r("unclosed string",e,E.index)):'"'===x?(p.lastIndex=E.index,p.exec(e)?v.lastIndex=p.lastIndex:r("unclosed string",e,E.index)):"`"===x&&(s.lastIndex=E.index,s.exec(e)?v.lastIndex=s.lastIndex:r("unclosed string",e,E.index))}S?a.push(S):r("unclosed tag",e,h.index+g.length)}if(m(e.slice(i,e.length),!1),t.plugins)for(u=0;u<t.plugins.length;u++){var k;(k=t.plugins[u]).processAST&&(a=k.processAST(a,t))}return a}function m(e,t){var r=u(e,t),a="var tR='',__l,__lP"+(t.include?",include=E.include.bind(E)":"")+(t.includeFile?",includeFile=E.includeFile.bind(E)":"")+"\nfunction layout(p,d){__l=p;__lP=d}\n"+(t.useWith?"with("+t.varName+"||{}){":"")+function(e,t){for(var r=0,a=e.length,n="";r<a;r++){var o=e[r];if("string"==typeof o)n+="tR+='"+o+"'\n";else{var i=o.t,c=o.val||"";"r"===i?(t.filter&&(c="E.filter("+c+")"),n+="tR+="+c+"\n"):"i"===i?(t.filter&&(c="E.filter("+c+")"),t.autoEscape&&(c="E.e("+c+")"),n+="tR+="+c+"\n"):"e"===i&&(n+=c+"\n")}}return n}(r,t)+(t.includeFile?"if(__l)tR="+(t.async?"await ":"")+"includeFile(__l,Object.assign("+t.varName+",{body:tR},__lP))\n":t.include?"if(__l)tR="+(t.async?"await ":"")+"include(__l,Object.assign("+t.varName+",{body:tR},__lP))\n":"")+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(var n=0;n<t.plugins.length;n++){var o=t.plugins[n];o.processFnString&&(a=o.processFnString(a,t))}return a}var h=new(function(){function e(e){this.cache=e}return e.prototype.define=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.reset=function(){this.cache={}},e.prototype.load=function(e){n(this.cache,e)},e}())({}),f={async:!1,autoEscape:!0,autoTrim:[!1,"nl"],cache:!1,e:function(e){var t=String(e);return/[&<>"']/.test(t)?t.replace(/[&<>"']/g,c):t},include:function(e,r){var a=this.templates.get(e);if(!a)throw t('Could not fetch template "'+e+'"');return a(r,this)},parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],templates:h,useWith:!1,varName:"it"};function y(e,t){var r={};return n(r,f),t&&n(r,t),e&&n(r,e),r}function v(e,r){var a=y(r||{}),n=a.async?function(){try{return new Function("return (async function(){}).constructor")()}catch(e){throw e instanceof SyntaxError?t("This environment doesn't support async/await"):e}}():Function;try{return new n(a.varName,"E","cb",m(e,a))}catch(r){throw r instanceof SyntaxError?t("Bad template syntax\n\n"+r.message+"\n"+Array(r.message.length+1).join("=")+"\n"+m(e,a)+"\n"):r}}function g(e,t){if(t.cache&&t.name&&t.templates.get(t.name))return t.templates.get(t.name);var r="function"==typeof e?e:v(e,t);return t.cache&&t.name&&t.templates.define(t.name,r),r}function w(e,r,n,o){var i=y(n||{});if(!i.async)return g(e,i)(r,i);if(!o){if("function"==typeof a)return new a((function(t,a){try{t(g(e,i)(r,i))}catch(e){a(e)}}));throw t("Please provide a callback function, this env doesn't support Promises")}try{g(e,i)(r,i,o)}catch(e){return o(e)}}e.compile=v,e.compileToString=m,e.config=f,e.configure=function(e){return n(f,e)},e.defaultConfig=f,e.getConfig=y,e.parse=u,e.render=w,e.renderAsync=function(e,t,r,a){return w(e,t,Object.assign({},r,{async:!0}),a)},e.templates=h,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(o={exports:{}},o.exports),o.exports),s=(i=c)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;class l{constructor(t,r){if(e(this,"activeClass","w--ecommerce-pill-selected"),this.group=t,this.form=r,this.name=this.group.getAttribute("aria-label"),this.select=this.form.querySelector('select[name="'+this.name+'"]'),!this.select)throw Error("Invalid Pills!",t);this.pills=this.group.querySelectorAll(".w-commerce-commerceaddtocartoptionpill"),this.select.addEventListener("change",(e=>{this.changeValue(this.select.value)})),this.changeValue(this.select.value),this.pills.forEach((e=>{e.addEventListener("click",(t=>{this.select.value=e.dataset.optionName,console.log(this.select.value,e.dataset.optionName),this.select.dispatchEvent(new Event("change",{bubbles:!0}))}))}))}changeValue(e){e&&this.pills.forEach((t=>{t.dataset.optionName==e?t.classList.add(this.activeClass):t.classList.remove(this.activeClass)}))}}function p(){var e=Snipcart.store.getState().session.settings.currency||"usd";return{symbol:ecommerceUtils.currencies[e]||"$",currencyCode:e}}class d{constructor(e){var t=this;if(!e._snipcartEnabled){if(this.form=e,this.images=[],this.prices=[],this.submit=this.form.querySelector('input[type="submit"]'),!this.submit)throw Error("Invalid Add to cart",e);this.properties=this.parseProperties(this.form),this.normalAddToCartText=this.submit.value||"Add to Cart",this.loadingAddToCartText=this.submit.dataset.loadingText||"Adding to cart...",this.form.querySelectorAll('[data-node-type="commerce-add-to-cart-error"]').forEach((e=>{e.dataset.wAddToCartGeneralError&&(e.textContent=e.dataset.wAddToCartGeneralError)})),this.form.querySelectorAll('[data-node-type="commerce-buy-now-button"]').forEach((e=>{e.addEventListener("click",function(){var a=r((function*(r){r.preventDefault(),t.checkIfOptionsSelected()&&(e.dataset.value||(e.dataset.value=e.textContent),e.textContent=e.dataset.loadingText||e.dataset.value,yield t.addItemToCartAndCheckout(),e.textContent=e.dataset.value)}));return function(e){return a.apply(this,arguments)}}())})),this.errorWrapper=this.form.parentElement.querySelector(".w-commerce-commerceaddtocarterror"),this.errorMessage=this.errorWrapper?this.errorWrapper.firstElementChild:null,this.errorTimeout=null,this.generalErrorMessage=this.errorMessage?this.errorMessage.textContent:"",this.outOfStockErrorWrapper=this.form.parentElement.querySelector(".w-commerce-commerceaddtocartoutofstock");try{this.variationConfig=JSON.parse(this.form.querySelector("script").textContent),this.variation=this.variationConfig[0],this.form.querySelector("select")&&this.form.addEventListener("change",(()=>this.changeVariation()));var a=this.form.closest(".w-dyn-item");a?(this.images=Array.from(a.querySelectorAll('[data-commerce-type="variation-image"]')),this.moreImages=Array.from(a.querySelectorAll('[data-commerce-type="more-images"]')),this.prices=Array.from(a.querySelectorAll('[data-commerce-type="variation-price"]'))):(this.moreImages=Array.from(document.querySelectorAll('[data-commerce-type="more-images"]')).filter((e=>!e.closest(".w-dyn-item"))),this.images=Array.from(document.querySelectorAll('[data-commerce-type="variation-image"]')).filter((e=>!e.closest(".w-dyn-item"))),this.prices=Array.from(document.querySelectorAll('[data-commerce-type="variation-price"]')).filter((e=>!e.closest(".w-dyn-item")))),this.moreImages.forEach((e=>{var t=document.getElementById(e.dataset.templateId);t&&(e.templateEmpty=t.content.querySelector(".w-dyn-empty").cloneNode(!0),e.templateList=t.content.querySelector(".w-dyn-items").cloneNode(!1),e.templateItem=t.content.querySelector(".w-dyn-item").cloneNode(!0))}))}catch(e){console.error("Missing necessary data for Add to Cart!",this.form)}this.form.querySelectorAll(".w-commerce-commerceaddtocartoptionpillgroup").forEach((e=>{new l(e,this.form)})),this.form.addEventListener("submit",(e=>{e.preventDefault(),e.stopPropagation(),this.checkIfOptionsSelected()&&this.addItemToCart()})),e._snipcartEnabled=!0}}checkIfOptionsSelected(){var e=Array.from(this.form.querySelectorAll("select"));if(e&&e.length){if(e.some((function(e){return!e.value})))return this.showVariantError(this.errorMessage&&this.errorMessage.dataset&&this.errorMessage.dataset.wAddToCartSelectAllOptionsError||"Please select all product options");var t=this.getSelectedOptions();if(!this.selectionMatchesCurrentVariant(t))return this.showVariantError(this.variantUnavailableMessage())}return this.clearVariantError()}getSelectedOptions(){var e=Object.fromEntries(new FormData(this.form).entries());return delete e["commerce-add-to-cart-quantity-input"],delete e.quantity,Object.entries(e).filter((function(e){var t=e[1];return t&&""!==t}))}selectionMatchesCurrentVariant(e){if(!e||!e.length)return!0;if(!this.variation)return!1;var t=this.variation["variation-properties"]||{};return e.every((function(e){var r=e[0],a=e[1];return t[r]===a}))}updateAvailableOptions(e){var t=this,r=Array.from(this.form.querySelectorAll("select"));r&&r.length&&r.forEach((function(a){if("commerce-add-to-cart-quantity-input"!==a.name){var n=new Set;t.variationConfig.forEach((function(o){var i=o["variation-properties"]||{},c=!0;e.forEach((function(e){var t=e[0],r=e[1];t===a.name||(i[t]===r||(c=!1))})),c&&i[a.name]&&n.add(i[a.name])})),a.querySelectorAll("option").forEach((function(e){e.value?n.size?e.disabled=!n.has(e.value):e.disabled=!1:e.disabled=!1}));var o=a.options[a.selectedIndex];o&&o.disabled&&(a.value="",a.dispatchEvent(new Event("change",{bubbles:!0})))}}))}variantUnavailableMessage(){return this.errorMessage&&this.errorMessage.dataset&&this.errorMessage.dataset.wAddToCartCombinationError||"This combination is not available. Please try different options."}showVariantError(e){if(this.errorWrapper&&this.errorMessage){this.errorMessage.textContent=e||this.generalErrorMessage||"",this.errorWrapper.style.display="",clearTimeout(this.errorTimeout);var t=this;this.errorTimeout=setTimeout((function(){t.errorWrapper&&(t.errorWrapper.style.display="none")}),2e3)}return!1}clearVariantError(){return this.errorWrapper&&(this.errorWrapper.style.display="none",clearTimeout(this.errorTimeout),this.errorTimeout=null),this.errorMessage&&this.generalErrorMessage&&(this.errorMessage.textContent=this.generalErrorMessage),!0}parseProperties(e){if(!e)return{};try{var t={};return JSON.parse(e.dataset.properties.replace(/\\x22/gm,'"')).forEach((e=>{t[e.slug]=e.name})),e.removeAttribute("data-properties"),t}catch(e){return{}}}changeVariation(){var e=this,t=Object.fromEntries(new FormData(this.form).entries());delete t["commerce-add-to-cart-quantity-input"],delete t.quantity;var r=Object.entries(t).filter((function(e){var t=e[1];return t&&""!==t})),a=null,n=-1;this.variationConfig.forEach((function(t){var o=t["variation-properties"]||{},i=!0,c=0;r.forEach((function(e){var t=e[0],r=e[1];o[t]===r?c++:i=!1})),i&&c>n&&(a=t,n=c)})),this.updateAvailableOptions(r),a?(this.variation!==a&&(this.variation=a,this.updateVariationProps()),this.clearVariantError()):r.length?this.showVariantError(this.variantUnavailableMessage()):this.clearVariantError()}updateVariationProps(){var e=this.variation["main-image"],t=this.variation["more-images"];e&&this.images.forEach((t=>{"IMG"==t.tagName?(t.src=e.url,t.alt=e.alt):t.style.backgroundImage="url(".concat(e.url,")")})),this.moreImages&&this.moreImages.length&&this.updateMoreImages(t);var r=Object.entries(ecommerceUtils.currencies).reduce(((e,t)=>{var[r,a]=t;return e+'<price data-currency-code="'.concat(r,'">').concat(window.ecommerceUtils.priceTemplate(this.variation.price[r],a,r),"</price>")}),"");this.prices.forEach((e=>{e.innerHTML=r}))}updateMoreImages(e){this.moreImages.forEach((t=>{if(t.templateEmpty&&t.templateList&&t.templateItem)if(t.innerHTML="",e.length){var r=t.templateList.cloneNode();for(var a of e){var n=t.templateItem.cloneNode(!0),o=n.querySelector("img");o?(o.src=a.url,o.alt=a.alt):n.firstElementChild?n.firstElementChild.style.backgroundImage="url("+a.url+")":n.style.backgroundImage="url("+a.url+")";var i=n.querySelector("script");if(i){var c={items:[{type:"image",url:a.url,caption:a.alt}]};i.textContent=JSON.stringify(c)}r.append(n)}t.append(r);var s=Webflow.require("lightbox");s&&s.ready()}else t.append(t.templateEmpty.cloneNode(!0));else console.error("Invalid Template More Images")}))}addItemToCartAndCheckout(){var e=this;return r((function*(){(yield e.addItemToCart(!1))&&(window.location.hash="/checkout")}))()}prettifyVariationProperties(e){if(!e||!this.properties)return e;var t={};for(var r in e){var a=e[r];this.properties[r]?t[this.properties[r]]=a:t[r]=a}return t}addItemToCart(){var e=arguments,t=this;return r((function*(){var n=!(e.length>0&&void 0!==e[0])||e[0],o=t.getSelectedOptions();if(!t.selectionMatchesCurrentVariant(o))return t.showVariantError(t.variantUnavailableMessage());t.clearVariantError();try{t.form.classList.add("buying"),t.errorWrapper&&(t.errorWrapper.style.display="none",t.errorMessage&&(t.errorMessage.textContent=t.errorMessage.dataset.wAddToCartGeneralError)),t.outOfStockErrorWrapper&&(t.outOfStockErrorWrapper.style.display="none");var i={quantity:Object.fromEntries(new FormData(t.form).entries()).quantity||1,price:t.variation.price[p().currencyCode],id:t.variation.slug,url:"/data/products.json",name:t.variation.title,image:t.variation["main-image"].url,metadata:t.prettifyVariationProperties(t.variation["variation-properties"]||{}),dimensions:t.variation.dimensions||{}};n&&(t.submit.value=t.loadingAddToCartText);var c=yield Snipcart.api.cart.items.add(i);t.form.classList.remove("buying"),t.submit.value=t.normalAddToCartText;var s=c[0];if(s.stock){var l=s.stock.isInStock;s.stock.stock&&s.stock.stock;if(!l)return t.outOfStockErrorWrapper&&(t.outOfStockErrorWrapper.style.display="",setTimeout((()=>{t.outOfStockErrorWrapper.style.display="none"}),3e3)),yield Snipcart.api.cart.items.remove(s.uniqueId),!1}return n&&document.body.dispatchEvent(new CustomEvent("webflow.opencart")),!0}catch(e){return t.form.classList.remove("buying"),t.errorWrapper&&(t.errorWrapper.style.display="",setTimeout((()=>{t.errorWrapper.style.display="none"}),3e3)),console.error(e),!1}}))()}
